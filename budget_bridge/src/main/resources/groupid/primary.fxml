<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import org.kordamp.ikonli.javafx.FontIcon?>
<?import javafx.scene.chart.PieChart?>

<BorderPane fx:id="rootPane" stylesheets="@style.css" fx:controller="groupid.PrimaryController" xmlns:fx="http://javafx.com/fxml/1" styleClass="background">
   <top>
      <VBox alignment="CENTER">
         <BorderPane.margin>
            <Insets top="20" right="20" bottom="20" left="20"/>
         </BorderPane.margin>
         <HBox spacing="15">
            <HBox.margin>
               <Insets top="0" right="50" bottom="0" left="50"/>
            </HBox.margin>
            <MenuBar styleClass="modern-menu-bar">
               <Menu text="â‰¡" styleClass="modern-menu">
                  <MenuItem fx:id="profileButton" text="Profile" styleClass="menu-item" onAction="#switchToProfile"/>
                  <MenuItem fx:id="logoffButton" text="Logoff" styleClass="menu-item" onAction="#logoff"/>
               </Menu>
            </MenuBar>
            <Button fx:id="dashboardButton" text="My Dashboard" styleClass="modern-nav-button-active" onAction="#switchToPrimary"/>
            <Button fx:id="leaderboardsButton" text="Leaderboards" styleClass="modern-nav-button" onAction="#switchToLeaderboard"/>
            <Button fx:id="budgetButton" text="Update Budget" styleClass="modern-nav-button" onAction="#switchToSecondary"/>
            <Button fx:id="storeButton" text="Exchange Store" styleClass="modern-nav-button" onAction="#switchToStore"/>
         </HBox>
      </VBox>
   </top>

   <left>
      <VBox alignment="TOP_LEFT" spacing="25" styleClass="dashboard-welcome-panel">
         <BorderPane.margin>
            <Insets top="20" right="20" bottom="20" left="20"/>
         </BorderPane.margin>
         
         <!-- Welcome Section -->
         <VBox spacing="15">
            <Label fx:id="userLabel" styleClass="panel-heading"/>
            <Label fx:id="gemsLabel" styleClass="store-gems"/>
         </VBox>
         
         <VBox spacing="20" styleClass="budget-overview-card" VBox.vgrow="ALWAYS">
            <Label text="Budget Overview" styleClass="card-heading"/>
            
            <HBox spacing="30" alignment="CENTER">
               <VBox fx:id="incomeVBox" alignment="CENTER" spacing="12" styleClass="overview-metric-card">
                  <!-- Income items will be populated by controller -->
               </VBox>
               <VBox fx:id="expenseVBox" alignment="CENTER" spacing="12" styleClass="overview-metric-card">
                  <!-- Expense items will be populated by controller -->
               </VBox>
               
            </HBox>
               <!-- Expense tracker  -->
            <VBox fx:id="expenseProgressVBox" spacing="15" styleClass="expense-progress-section"/>
         </VBox>
         
      </VBox>
      <padding>
         <Insets bottom="25" left="25" right="25" top="25"/>
      </padding>
   </left>

   <right>
      <VBox spacing="25" styleClass="dashboard-sidebar-panel">
         <BorderPane.margin>
            <Insets top="20" right="20" bottom="20" left="20"/>
         </BorderPane.margin>
         
         
         <VBox spacing="15" styleClass="missions-overview-card" VBox.vgrow="ALWAYS">
            <Label text="Active Missions" styleClass="card-heading"/>
               <ListView fx:id="missionList" styleClass="modern-list"/>
         </VBox>
         
         <VBox spacing="15" styleClass="scrollpane-badges" VBox.vgrow="ALWAYS">
            <Label text="Achievement Badges" styleClass="card-heading"/>
            <ListView fx:id="badgeList" styleClass="scrollpane-badges"/>
         </VBox>
         
      </VBox>
      <padding>
         <Insets bottom="20" left="20" right="20" top="20"/>
      </padding>
   </right>

   <center>
      <VBox alignment="CENTER" spacing="25" styleClass="dashboard-chart-panel">
         <BorderPane.margin>
            <Insets top="10" right="20" bottom="20" left="20"/>
         </BorderPane.margin>
         
         <VBox spacing="20" styleClass="chart-display-card" alignment="CENTER">
            <Label text="Spending Breakdown" styleClass="card-heading"/>
            
            <VBox alignment="CENTER" spacing="15">
               <PieChart fx:id="budgetPie"
               prefWidth="500" prefHeight="500"
               legendVisible="false"/>
            </VBox>
            
         </VBox>
      </VBox>
      <padding>
         <Insets bottom="25" left="25" right="25" top="25"/>
      </padding>
   </center>

</BorderPane>